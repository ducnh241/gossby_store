<!DOCTYPE html>
<html lang="en">
    <head>        
    <script type="text/javascript" src="paperjs-v0.12.11/dist/paper-full.js"></script>
    <script type="text/javascript" src="../../resource/script/community/jquery/jquery-1.7.2.js"></script>
    </head>
    <body>
        <div>
			<?xml version="1.0" encoding="utf-8"?>
			<!-- Generator: Adobe Illustrator 23.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
			<svg version="1.1" id="back_1_" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
				 viewBox="0 0 1000 1000" style="enable-background:new 0 0 1000 1000;" xml:space="preserve">
<style type="text/css">
	.st0{display:none;}
	.st1{display:inline;}
	.st2{fill:none;stroke:#990021;stroke-miterlimit:10;}
	.st3{fill:none;stroke:#0E0093;stroke-miterlimit:10;}
</style>
				<g id="default" class="st0">
	<g id="default_ngang" class="st1">

	
				<path class="st2" d="M856.1,754.3c-136.3,0-272.7,0-409,0"/>
	
	
				<path class="st2" d="M856.1,703.8c-136.3,0-272.7,0-409,0"/>
	
	
				<path class="st2" d="M856.1,653.2c-136.3,0-272.7,0-409,0"/>
	
	
				<path class="st2" d="M856.1,602.6c-136.3,0-272.7,0-409,0"/>
	
	
				<path class="st2" d="M856.1,552c-136.3,0-272.7,0-409,0"/>
	
	
				<path class="st2" d="M856.1,501.4c-136.3,0-272.7,0-409,0"/>
	
	
				<path class="st2" d="M856.1,450.8c-136.3,0-272.7,0-409,0"/>
	
	
				<path class="st2" d="M856.1,400.2c-136.3,0-272.7,0-409,0"/>
	
	
				<path class="st2" d="M856.1,349.7c-136.3,0-272.7,0-409,0"/>
	

	</g>
					<g id="default_doc" class="st1">

	
				<path class="st2" d="M450.8,327.6c0,147.8,0,295.7,0,443.5"/>
	
	
				<path class="st2" d="M490.7,327.6c0,147.8,0,295.7,0,443.5"/>
	
	
				<path class="st2" d="M530.7,327.6c0,147.8,0,295.7,0,443.5"/>
	
	
				<path class="st2" d="M570.6,327.6c0,147.8,0,295.7,0,443.5"/>
	
	
				<path class="st2" d="M610.4,327.6c0,147.8,0,295.7,0,443.5"/>
	
	
				<path class="st2" d="M650.3,327.6c0,147.8,0,295.7,0,443.5"/>
	
	
				<path class="st2" d="M690.2,327.6c0,147.8,0,295.7,0,443.5"/>
	
	
				<path class="st2" d="M730.2,327.6c0,147.8,0,295.7,0,443.5"/>
	
	
				<path class="st2" d="M770.1,327.6c0,147.8,0,295.7,0,443.5"/>
	
	
				<path class="st2" d="M810,327.6c0,147.8,0,295.7,0,443.5"/>
	
	
				<path class="st2" d="M849.8,327.6c0,147.8,0,295.7,0,443.5"/>

	</g>
</g>
				<g id="moved">
	<g id="moved_ngang">

			<path class="st3" d="M858.6,744.8c-64.9,15.5-288.6,18.8-362.5-12.6"/>


			<path class="st3" d="M856.8,703.8c-136.1,9.4-243.4,9.1-360.7-11.1"/>


			<path class="st3" d="M856.8,653.2c-136,3.6-221.7,10.7-360.7-1.4"/>


			<path class="st3" d="M856.8,602.6c-136,1.4-224.2,11.8-360.7,0"/>


			<path class="st3" d="M856.8,552c-136,0-216.1,7.3-360.7,1.4"/>


			<path class="st3" d="M856.8,501.4c-136-1-224.5-0.1-360.7,3.5"/>


			<path class="st3" d="M856.8,450.8c-136-2.9-241.6-8.1-360.7,1.4"/>


			<path class="st3" d="M856.8,400.2c-85.2-3-130.2-7.3-215.4-5.2c-50.8,1.2-96,0.1-145.2,8.7"/>


			<path class="st3" d="M856.8,352.4c-85.2-3.7-130.2-8.2-215.4-5.7c-50.9,1.5-103.5,1.1-145.2,12.6"/>

	</g>
					<g id="moved_doc">

			<path class="st3" d="M505.4,327.6c0,147.8,0,295.7,0,443.5"/>

				
			<path class="st3" d="M513,327.6c0,147.8,0,295.7,0,443.5"/>

				
			<path class="st3" d="M529.2,327.6c0,147.8,0,295.7,0,443.5"/>

				
			<path class="st3" d="M566.6,327.6c0,147.8,0,295.7,0,443.5"/>

				
			<path class="st3" d="M605.2,327.6c0,147.8,0,295.7,0,443.5"/>

				
			<path class="st3" d="M648.9,327.6c0,147.8,0,295.7,0,443.5"/>

				
			<path class="st3" d="M692.5,327.6c0,147.8,0,295.7,0,443.5"/>

				
			<path class="st3" d="M736.2,327.6c0,147.8,0,295.7,0,443.5"/>

				
			<path class="st3" d="M777.6,327.6c0,147.8,0,295.7,0,443.5"/>

				
			<path class="st3" d="M814.8,327.6c0,147.8,0,295.7,0,443.5"/>

				
			<path class="st3" d="M850.8,327.6c0,147.8,0,295.7,0,443.5"/>

	</g>
</g>
</svg>

		</div>
		<canvas id="canvas_default" width="1000" height="1000"></canvas>
		<canvas id="canvas_moved" width="1000" height="1000"></canvas>
        <script type="text/javascript">
            paper.setup('canvas_default');
            
            var default_ngang_elms = [];
            var default_doc_elms = [];
            var moved_ngang_elms = [];
            var moved_doc_elms = [];
            
            var points = [];
            
            function _makePaperElm(node) {
                if(node.nodeName === 'path') {
                    var elm = new paper.Path(node.getAttribute('d'));
                    
                    elm.strokeWidth = 1;
                    elm.strokeColor = 'blue';
                    
                    return elm;
                } else if(node.nodeName === 'polyline') {
                    var elm = new paper.Path('M' + node.getAttribute('points'));
                    
                    elm.strokeWidth = 1;
                    elm.strokeColor = 'blue';
                    
                    return elm;
                } else if(node.nodeName === 'line') {
                    var P1 = new paper.Point(parseFloat(node.getAttribute('x1')),parseFloat(node.getAttribute('y1')));
                    var P2 = new paper.Point(parseFloat(node.getAttribute('x2')),parseFloat(node.getAttribute('y2')));
                    
                    var elm = new paper.Path.Line(P1,P2);
                    
                    elm.strokeWidth = 1;
                    elm.strokeColor = 'red';
                    
                    return elm;
                } else {
                    console.error(node);
                }
            }
            
            $('#default_ngang > *').each(function(){
                default_ngang_elms.push(_makePaperElm(this));
            });
            
            $('#default_doc > *').each(function(){
                default_doc_elms.push(_makePaperElm(this));
            });
            
            var counter = 0;
            
            default_ngang_elms.forEach(function(ngang_elm){
                default_doc_elms.forEach(function(doc_elm){                    
                    var intersections = ngang_elm.getIntersections(doc_elm);
                    
                    for (var i = 0; i < intersections.length; i++) {                        
                        new paper.Path.Circle({
                            center: intersections[i].point,
                            radius: 3,
                            fillColor: 'green'
                        });

						var text = new paper.PointText(new paper.Point(intersections[i].point.x + 2, intersections[i].point.y + 2));
						text.content = counter;
						text.fillColor = 'green';
                    }
                    
                    
                    counter ++;
                    
                    if(intersections.length !== 1) {
                        points[counter] = '';
                    } else {
                        points[counter] = intersections[0].point.x + ',' + intersections[0].point.y;
                    }
                });
            });

			paper.setup('canvas_moved');

			$('#moved_ngang > *').each(function(){
				moved_ngang_elms.push(_makePaperElm(this));
			});

			$('#moved_doc > *').each(function(){
				moved_doc_elms.push(_makePaperElm(this));
			});
            
            counter = 0;
            
            moved_ngang_elms.forEach(function(ngang_elm){
                moved_doc_elms.forEach(function(doc_elm){                    
                    var intersections = ngang_elm.getIntersections(doc_elm);
                    
                    for (var i = 0; i < intersections.length; i++) {                        
                        new paper.Path.Circle({
                            center: intersections[i].point,
                            radius: 3,
                            fillColor: 'green'
                        });

						var text = new paper.PointText(new paper.Point(intersections[i].point.x + 2, intersections[i].point.y + 2));
						text.content = counter;
						text.fillColor = 'red';
                    }
                    
                    counter ++;
                    
                    if(intersections.length !== 1) {
                        points[counter] += '';
                    } else {
                        points[counter] += ' ' + intersections[0].point.x + ',' + intersections[0].point.y;
                    }
                });
            });
            
            console.log(points.join("\n"));
        </script>
    </body>
</html>